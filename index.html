<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Train Game</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/style.css">
  <link rel="stylesheet" href="assets/app.js">
  <script src="https://www.gstatic.com/firebasejs/5.0.2/firebase.js"></script>
</head>

<body>
  <h1>Anytime is train Time
    <h2>Choo choo Chee chee </h2>
  </h1>
  <div class="container">
    <h2>Train Times</h2>
    <table class="table">
      <thead>
        <tr>
          <th>Train Name</th>
          <th>Destination</th>
          <th>Frequency</th>
          <th>Next Arrival</th>
          <th>Minutes Away</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Train 1</td>
          <td>placeholder</td>
          <td>placeholder</td>
          <td>placeholder</td>
          <td>placeholder</td>
        </tr>
        <tr>
          <td>Train 2</td>
          <td>placeholder</td>
          <td>placeholder</td>
          <td>placeholder</td>
          <td>placeholder</td>
        </tr>
        <tr>
          <td>Train 3</td>
          <td>placeholder</td>
          <td>placeholder</td>
          <td>placeholder</td>
          <td>placeholder</td>
        </tr>
        <tr>
          <td>Train 4</td>
          <td>placeholder</td>
          <td>placeholder</td>
          <td>placeholder</td>
          <td>placeholder</td>
        </tr>
        <tr>
          <td>Train 5</td>
          <td>placeholder</td>
          <td>placeholder</td>
          <td>placeholder</td>
          <td>placeholder</td>
        </tr>
      </tbody>
    </table>
  </div>

  <form id="form" action="/action_page.php">
    <div id="name" class="form-group">
      <label for="text">Train Name:</label>
      <input type="text" class="form-control" id="text">
    </div>
    <div id="destination" class="form-group">
      <label for="text">Destination:</label>
      <input type="text" class="form-control" id="text">
    </div>
    <div id="frequency" class="form-group">
      <label for="text">First train time (HH:mm - military time):</label>
      <input type="text" class="form-control" id="text">
    </div>
    <div id="nextArrival" class="form-group">
      <label for="text">Frequency (mins):</label>
      <input type="text" class="form-control" id="text">
    </div>

    <button id="trainBtn" type="submit" class="btn btn-default">Submit</button>
  </form>

  <script src="https://www.gstatic.com/firebasejs/5.0.3/firebase.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyBeVtM3uiHHsrljxxPLhW6WcM2Mb6Mz4ak",
      authDomain: "train-d3564.firebaseapp.com",
      databaseURL: "https://train-d3564.firebaseio.com",
      projectId: "train-d3564",
      storageBucket: "",
      messagingSenderId: "166738016174"
    };
    firebase.initializeApp(config);

    // Initial Values
    var name = "";
    var destination = "";
    var frequency = "";
    var nextArrival = "";
    var minAway = "";


    // Capture Button Click
    addTrain = $("#trainBtn").on("click", function (event) {
      event.preventDefault();

      // Grabbed values from text-boxes
      name = $("#name-input").val().trim();
      destination = $("#destination-input").val().trim();
      frequency = $("#frequency-input").val().trim();
      nextArrival = $("#nextArrival-input").val().trim();
      minAway = $("#minAway-input").val().trim();


      // Code for "Setting values in the database"
      database.ref().push({
        name: name,
        destination: destination,
        frequency: frequency,
        nextArrival: nextArrival,
        minAway: minAway
      });

    });

    // Firebase watcher + initial loader HINT: .on("value")
    database.ref().on("value", function (snapshot) {

      // Log everything that's coming out of snapshot
      console.log(snapshot.val());
      console.log(snapshot.val().name);
      console.log(snapshot.val().email);
      console.log(snapshot.val().age);
      console.log(snapshot.val().comment);

      // Change the HTML to reflect
      $("#name-display").text(snapshot.val().name);
      $("#destination-display").text(snapshot.val().destination);
      $("#frequency-display").text(snapshot.val().frequency);
      $("#nextArrival-display").text(snapshot.val().nextArrival);
      $("#minAway-display").text(snapshot.val().minAway);


      // Handle the errors
    }, function (errorObject) {
      console.log("Errors handled: " + errorObject.code);
    });
  </script>

</body>

</html>